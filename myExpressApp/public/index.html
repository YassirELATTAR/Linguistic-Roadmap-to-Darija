<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/bootstrap.min.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/mycss.css">
  <link rel="stylesheet" href="searchStyle.css">

  <style>
    /*additional stlying for the image of description*/
    .img-fluid {
      max-width: 100%;
      height: auto;
      display: block;
      margin-left: auto;
      margin-right: auto;
      margin-top: 10px;
    }
  </style>
  <title>Main Page</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light justify-content-center custom-padding">
    <a class="navbar-brand" href="index.html">
        <img src="img/logo.png" alt="Home" height="30">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="vocabularyDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Vocabulary
          </a>
          <div class="dropdown-menu" aria-labelledby="vocabularyDropdown">
            <a class="dropdown-item" href="/vocabulary/animals">Animals</a>
            <a class="dropdown-item" href="/vocabulary/art">Art</a>
            <a class="dropdown-item" href="/vocabulary/clothes">Clothes</a>
            <a class="dropdown-item" href="/vocabulary/colors">Colors</a>
            <a class="dropdown-item" href="/vocabulary/economy">Economy</a>
            <a class="dropdown-item" href="/vocabulary/education">Education</a>
            <a class="dropdown-item" href="/vocabulary/emotions">Emotions</a>
            <a class="dropdown-item" href="/vocabulary/environment">Environment</a>
            <a class="dropdown-item" href="/vocabulary/family">Family</a>
            <a class="dropdown-item" href="/vocabulary/femalenames">Female Names</a>
            <a class="dropdown-item" href="/vocabulary/food">Food</a>
            <a class="dropdown-item" href="/vocabulary/health">Health</a>
            <a class="dropdown-item" href="/vocabulary/humanbody">Human Body</a>
            <a class="dropdown-item" href="/vocabulary/malenames">Male Names</a>
            <a class="dropdown-item" href="/vocabulary/numbers">Numbers</a>
            <a class="dropdown-item" href="/vocabulary/places">Places</a>
            <a class="dropdown-item" href="/vocabulary/plants">Plants</a>
            <a class="dropdown-item" href="/vocabulary/professions">Professions</a>
            <a class="dropdown-item" href="/vocabulary/religion">Religion</a>
            <a class="dropdown-item" href="/vocabulary/sports">Sports</a>
            <a class="dropdown-item" href="/vocabulary/time">Time</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="grammarDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Grammar
          </a>
          <div class="dropdown-menu" aria-labelledby="grammarDropdown">
            <a class="dropdown-item" href="/grammar/definite_indefinite">Definite Indefinite</a>
            <a class="dropdown-item" href="/grammar/adjectives">Adjectives</a>
            <a class="dropdown-item" href="/grammar/adverbs">Adverbs</a>
            <a class="dropdown-item" href="/grammar/conjug_past">Conjugation Past</a>
            <a class="dropdown-item" href="/grammar/conjug_present">Conjugation Present</a>
            <a class="dropdown-item" href="/grammar/imperatives">Imperatives</a>
            <a class="dropdown-item" href="/grammar/masculin_feminine_plural">Masculin-Feminine-Plural</a>
            <a class="dropdown-item" href="/grammar/nouns">Nouns</a>
            <a class="dropdown-item" href="/grammar/prepositions">Prepositions</a>
            <a class="dropdown-item" href="/grammar/pronouns">Pronouns</a>
            <a class="dropdown-item" href="/grammar/verb-to-noun">Verb to Noun</a>
            <a class="dropdown-item" href="/grammar/verbs">Verbs</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/vocabulary/sentences">Sentences</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="contributeDropdown" role="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Contribute
          </a>
          <div class="dropdown-menu" aria-labelledby="contributeDropdown">
            <a class="dropdown-item" href="/contribute/vocabulary">To Vocabulary</a>
            <a class="dropdown-item" href="/contribute/grammar">To Grammar</a>
            <a class="dropdown-item" href="/contribute/sentences">To Sentences</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../index.html#searchForm">Search</a>
        </li>
      </ul>
    </div>
  </nav>



  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h1
          style="font-family: 'American Typewriter', 'Times New Roman', serif; text-transform: uppercase; font-size: 44px; margin: 20px; font-weight: bold;">
          Linguistic Roadmap of Darija</h1>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div id="slideshow" class="d-flex justify-content-between align-items-center">
          <img src="slides/1.png" alt="Darija" class="active">
          <img src="slides/2.png" alt="Arabic">
          <img src="slides/3.png" alt="French">
          <img src="slides/4.png" alt="Spanish">
          <img src="slides/5.png" alt="Tamazight">
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-lg-9">
        <div class="my-main-div">
          <h2>Description</h2>
          <p>
            This platform is designed to help linguists as well as anyone interested in Darija to check the available
            dataset
            in a more user-friendly way. You can search the available vocabulary and discover the different forms of how
            words
            are spelled in Darija.<br>
            You can also check some sentences in case you are interested in the general form of the language. There is
            also a
            list of some common grammatical features that can help you understand the basics of Darija.<br>
            There is another part for people interested in contributing to the lexicon dataset. You can contribute to
            Grammar,
            Vocabulary, and Sentences. The only required thing is to have an XML file in the form described on the page
            of
            contribution.
          </p>
        </div>
      </div>
      <div class="col-lg-3 d-none d-lg-block">
        <img src="img/moroccancamel.png" alt="Image Description" class="img-fluid">
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="my-main-div" style="margin: 10px;">
          <h2>Variety of Spelling in Darija</h2>
          <p>
            Due to the lack of an official standard written form of Darija and after the use of internet, social media,
            and texting,
            speakers had to use Latin Alphabets to express themselves. This resulted in various forms of writing the
            same
            word. Here is a graph displaying the number of variation in Spelling Forms:
          </p>
          <div id="graph">
            <canvas id="spellingChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <form id="searchForm">
          <h3>English to Darija Search</h3>
          <div class="input-group mb-3">
            <input type="text" name="query" class="form-control" placeholder="Search..." required>
            <div class="input-group-append">
              <button type="submit" class="btn btn-primary" style="min-width: 100px;">Search</button>
            </div>
        </div>
        </form>
        <div id="searchResults"></div>
      </div>
    </div>
  </div>


  <footer class="footer py-4">
    <div class="container">
        <div class="row">
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4">
                <div class="footer-widget">
                    <h6>Students:</h6>
                    <ul class="list-unstyled">
                        <li><a style="text-decoration: none; color: black;" target="_blank" href="https://yassirea.me">Yassir EL ATTAR</a></li>
                        <li>Shawn Chua</li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4">
                <div class="footer-widget">
                    <h6>Professor:</h6>
                    <ul class="list-unstyled">
                        <li>Dr. Kerstin Jung</li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4">
                <div class="footer-widget">
                    <h6>Degree:</h6>
                    <ul class="list-unstyled">
                        <li>Computational Linguistics</li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4">
                <div class="footer-widget">
                    <h6>Course:</h6>
                    <ul class="list-unstyled">
                        <li>Text Technology</li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4">
                <div class="footer-widget">
                    <h6>University:</h6>
                    <ul class="list-unstyled">
                        <li>Unitversität Stuttgart</li>
                        <li>Summer 24</li>
                    </ul>
                </div>
            </div>
            <div class="col-xl-2 col-lg-3 col-md-6 col-sm-12 mb-4 d-flex align-items-center">
                <div class="footer-widget">
                  <img src="img/logo2.png" height="60" alt="Logo"/>
                </div>
            </div>
        </div>
    </div>
</footer>



  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <!-- Bootstrap JS and dependencies -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>

    //Displaying the chart for statistics of different spelling forms:
    async function fetchSpellingStats() {
      const response = await fetch('/spelling-stats');
      return response.json();
    }

    async function renderChart() {
      const data = await fetchSpellingStats();
      const ctx = document.getElementById('spellingChart').getContext('2d');

      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['n1', 'n2', 'n3', 'n4', 'n5', 'n6'],
          datasets: [{
            data: [data.n1, data.n2, data.n3, data.n4, data.n5, data.n6],
            backgroundColor: [
              'rgba(0, 0, 0, 1)', // black for n1
              'rgba(64, 64, 64, 1)', // dark gray for n2
              'rgba(96, 96, 96, 1)', // medium dark gray for n3
              'rgba(128, 128, 128, 1)', // medium gray for n4
              'rgba(160, 160, 160, 1)', // medium light gray for n5
              'rgba(192, 192, 192, 1)' // light gray for n6
            ],
            borderColor: [
              'rgba(0, 0, 0, 1)',
              'rgba(64, 64, 64, 1)',
              'rgba(96, 96, 96, 1)',
              'rgba(128, 128, 128, 1)',
              'rgba(160, 160, 160, 1)',
              'rgba(192, 192, 192, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: 'Count of Spelling Forms of Darija Lexicon',
              position: 'bottom',
              font: {
                weight: 'bold',
                size: '18px'
              },
              color: '#000'
            },
            datalabels: {
              anchor: 'end',
              align: 'top',
              formatter: function (value) {
                return value;
              },
              font: {
                weight: 'bold'
              }
            },
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        },
        plugins: [ChartDataLabels]
      });
    }

    renderChart();


    //Search for words and display them in the html page:
    document.getElementById('searchForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      const query = e.target.query.value;
      const response = await fetch(`/search?query=${query}`);
      const results = await response.json();
      const resultsContainer = document.getElementById('searchResults');

      if (results.length === 0) {
        resultsContainer.innerHTML = '<p>No results found.</p>';
      } else {
        let resultsHTML = '<h2>Search Results:</h2><ul>';

        results.forEach(item => {
          if (item.examples) {
            resultsHTML += '<li><h2>Examples:</h2><ul id="example_search"><ul>';
            item.examples.forEach(example => {
              resultsHTML += `
            <li style="background-color:#000000">
              <strong>English:</strong> ${example.eng}<br>
              <strong>Darija:</strong> ${example.darija}<br>
              <strong>Arabic Darija:</strong> ${example.darija_ar}
            </li>`;
            });
            resultsHTML += '</ul></ul></li>';
          } else {
            resultsHTML += '<li>' + Object.keys(item).filter(key => key !== '_id').map(key => `
          <strong>
            ${key.startsWith('n') ? 'Spelling form ' + key :
                key === 'eng' ? 'English' :
                  key === 'darija_ar' ? 'Arabic Darija' : key}
          </strong>: ${item[key]}
        `).join('<br>') + '</li>';
          }
        });

        resultsHTML += '</ul>';
        resultsContainer.innerHTML = resultsHTML;
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });


    //The following code is just to make the slides move to display the images
    let slideIndex = 0;
    const slides = document.querySelectorAll('#slideshow img');
    const totalSlides = slides.length;

    function showNextSlide() {
      slides[slideIndex].classList.remove('active');
      slideIndex = (slideIndex + 1) % totalSlides;
      slides[slideIndex].classList.add('active');
    }

    setInterval(showNextSlide, 5000);
  </script>
</body>

</html>